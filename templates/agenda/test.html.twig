<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Calendrier</title>
    
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.10/main.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.10/main.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@6.1.10/main.min.css" rel="stylesheet">
    
    <style>
        body {
            padding: 20px;
            background: #f5f5f5;
        }
        #calendar {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <h1 class="mb-4">Test Calendrier FullCalendar</h1>
        
        <div class="alert alert-info">
            <strong>Debug :</strong> Ouvrez la console (F12) pour voir les logs de d√©bogage
        </div>
        
        <div id="calendar"></div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.10/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.10/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@6.1.10/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/interaction@6.1.10/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/list@6.1.10/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.10/locales/fr.global.min.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('‚úÖ DOM charg√©');
        console.log('‚úÖ FullCalendar disponible:', typeof FullCalendar !== 'undefined');
        
        const calendarEl = document.getElementById('calendar');
        console.log('‚úÖ Element calendar trouv√©:', !!calendarEl);
        
        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'timeGridWeek',
            locale: 'fr',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            slotMinTime: '08:00:00',
            slotMaxTime: '20:00:00',
            allDaySlot: false,
            selectable: true,
            
            events: function(info, successCallback, failureCallback) {
                console.log('üìÖ Chargement √©v√©nements...');
                fetch('{{ path('api_calendar_events') }}?start=' + info.startStr + '&end=' + info.endStr)
                    .then(response => {
                        console.log('üì° Status:', response.status);
                        if (!response.ok) {
                            throw new Error('HTTP ' + response.status);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('‚úÖ Donn√©es re√ßues:', data);
                        successCallback(data);
                    })
                    .catch(error => {
                        console.error('‚ùå Erreur:', error);
                        failureCallback(error);
                    });
            },
            
            eventClick: function(info) {
                alert('√âv√©nement: ' + info.event.title);
            },
            
            select: function(info) {
                alert('Cr√©neau s√©lectionn√©: ' + info.startStr);
            },
            
            loading: function(isLoading) {
                console.log(isLoading ? '‚è≥ Chargement...' : '‚úÖ Termin√©');
            }
        });
        
        console.log('üöÄ Rendu du calendrier...');
        calendar.render();
        console.log('‚úÖ Calendrier rendu');
    });
    </script>
</body>
</html>