{# templates/rdv/_form.html.twig #}

{{ form_start(form, { attr: { class: 'row g-3' } }) }}

  {# --- Client (lecture seule) + hidden --- #}
  {% set _data = form.vars.data ?? null %}
  {% set _cli  = _data ? _data.client : null %}

  

  <div class="col-md-6">
    <label class="form-label">Client</label>
    <input type="text"
           class="form-control"
           value="{{ _cli ? _cli.nometprenom ~ (_cli.telephone ? ' — ' ~ _cli.telephone : '') : '—' }}"
           readonly>
    {% if _cli %}
      {{ form_widget(form.client_id, {'value': _cli.id}) }}
    {% endif %}
  </div>

  {# --- Prestation (EntityType dans RdvType) --- #}
  <div class="col-md-6">
    {{ form_label(form.prestation, 'Prestation', { label_attr: { class: 'form-label' } }) }}
    {{ form_widget(form.prestation, { attr: { class: 'form-select' } }) }}
    {{ form_errors(form.prestation) }}
  </div>

  {# --- Début du rendez-vous --- #}
  <div class="col-md-6">
    {{ form_label(form.startAt, 'Début', { label_attr: { class: 'form-label' } }) }}
    {{ form_widget(form.startAt, { attr: { class: 'form-control' } }) }}
    {{ form_errors(form.startAt) }}
  </div>

  {# --- Notes --- #}
  <div class="col-12">
    {{ form_label(form.notes, 'Notes', { label_attr: { class: 'form-label' } }) }}
    {{ form_widget(form.notes, { attr: { class: 'form-control', rows: 3 } }) }}
    {{ form_errors(form.notes) }}
  </div>

  <div class="col-12 d-flex gap-2">
    <button class="btn btn-primary">
      {{ button_label|default('Enregistrer') }}
    </button>
    <a href="{{ path('app_rdv_index') }}" class="btn btn-ghost-secondary">Annuler</a>
  </div>

{{ form_end(form) }}
