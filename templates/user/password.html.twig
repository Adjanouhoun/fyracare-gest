{% extends 'layouts/main.html.twig' %}
{% block title %}Changer le mot de passe{% endblock %}

{% block body %}
  {% include 'partials/flashes.html.twig' %}

  <div class="card">
    <div class="card-body">
      <h5 class="mb-3">Changer le mot de passe de {{ user.fullname }}</h5>

      {{ form_start(form) }}

      {# Ancien mot de passe (si tu veux l’afficher) #}
      {% if form.currentPassword is defined %}
        <div class="mb-3">
          <label class="form-label" for="{{ form.currentPassword.vars.id }}">Mot de passe actuel</label>
          <div class="input-group">
            <span class="input-group-text"><i class="ri-lock-line"></i></span>
            {{ form_widget(form.currentPassword, {attr: {class: 'form-control'}}) }}
          </div>
          {{ form_errors(form.currentPassword) }}
        </div>
      {% endif %}

      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label" for="{{ form.plainPassword.first.vars.id }}">Nouveau mot de passe</label>
          <div class="input-group">
            <span class="input-group-text"><i class="ri-lock-2-line"></i></span>
            {{ form_widget(form.plainPassword.first, {attr: {class: 'form-control', placeholder: 'Au moins 8 caractères'}}) }}
          </div>
          {{ form_errors(form.plainPassword.first) }}
        </div>
        <div class="col-md-6">
          <label class="form-label" for="{{ form.plainPassword.second.vars.id }}">Confirmation</label>
          <div class="input-group">
            <span class="input-group-text"><i class="ri-shield-check-line"></i></span>
            {{ form_widget(form.plainPassword.second, {attr: {class: 'form-control', placeholder: 'Répétez le mot de passe'}}) }}
          </div>
          {{ form_errors(form.plainPassword.second) }}
        </div>
      </div>

      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-primary"><i class="ri-check-line"></i> Mettre à jour</button>
        <a href="{{ path('app_user_show', {id: user.id}) }}" class="btn btn-ghost-secondary">Annuler</a>
      </div>

      {{ form_end(form) }}
    </div>
  </div>
{% endblock %}
