{% extends 'layouts/main.html.twig' %}
{% block title %}Injecter des fonds{% endblock %}

{% block page_header %}
  <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
    <div>
      <h4 class="fs-16 mb-1">Injecter des fonds</h4>
      <p class="text-muted mb-0">Créer une entrée de caisse (fonds de caisse, réapprovisionnement, virement, etc.).</p>
    </div>
    <div class="d-flex gap-2">
      <a class="btn btn-ghost-secondary" href="{{ path('cash_index') }}">
        <i class="ri-arrow-left-line align-middle me-1"></i> Retour
      </a>
    </div>
  </div>
{% endblock %}

{% block body %}
  {% include 'partials/flashes.html.twig' ignore missing %}

  <div class="card">
    <div class="card-header">
      <h5 class="card-title mb-0">Nouvelle injection</h5>
    </div>
    <div class="card-body">
      {{ form_start(form, {attr: {novalidate: 'novalidate', class: 'needs-validation'}}) }}

        {# Montant #}
        <div class="mb-3">
          {{ form_label(form.amount, 'Montant', {label_attr: {class: 'form-label'}}) }}
          <div class="input-group">
            <span class="input-group-text"><i class="ri-coins-line"></i></span>
            {{ form_widget(form.amount, {attr: {class: 'form-control', placeholder: '0', required: true}}) }}
            <span class="input-group-text">MRU</span>
          </div>
          <div class="form-text">Saisissez un montant strictement positif.</div>
          {{ form_errors(form.amount) }}
        </div>

        {# Source des fonds #}
        <div class="mb-3">
          {{ form_label(form.source, 'Source des fonds', {label_attr: {class: 'form-label'}}) }}
          <div class="input-group">
            <span class="input-group-text"><i class="ri-bank-card-2-line"></i></span>
            {{ form_widget(form.source, {attr: {class: 'form-select', required: true}}) }}
          </div>
          {{ form_errors(form.source) }}
        </div>

        {# Notes #}
        <div class="mb-3">
          {{ form_label(form.notes, 'Notes', {label_attr: {class: 'form-label'}}) }}
          {{ form_widget(form.notes, {attr: {class: 'form-control', rows: 3, placeholder: 'Ex. réapprovisionnement caisse principale', required: true}}) }}
          {{ form_errors(form.notes) }}
        </div>

        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-primary">
            <i class="ri-download-2-line align-middle me-1"></i> Enregistrer
          </button>
          <a class="btn btn-ghost-secondary" href="{{ path('cash_index') }}">
            Annuler
          </a>
        </div>

      {{ form_end(form) }}
    </div>
  </div>
{% endblock %}
