{% extends 'layouts/main.html.twig' %}
{% block title %}Reçu Paiement {{ payment.receiptNumber }} | Velzon{% endblock %}

{% block page_header %}
  <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
    <div>
      <h4 class="fs-16 mb-1">Reçu de paiement</h4>
      <p class="text-muted mb-0">N° {{ payment.receiptNumber }}</p>
    </div>
    <div class="d-print-none">
      <button onclick="window.print()" class="btn btn-primary">
        <i class="ri-printer-line align-middle me-1"></i> Imprimer
      </button>
      <a href="{{ path('app_rdv_show', { id: payment.rdv.id }) }}" class="btn btn-ghost-secondary">Voir le RDV</a>
    </div>
  </div>
{% endblock %}

{% block body %}
<div class="card">
  <div class="card-body">
    <div class="row mb-4">
      <div class="col-sm-6">
        <h6 class="text-uppercase text-muted">Émetteur</h6>
        <h5 class="mb-1">Fyracare</h5>
        <div class="text-muted">Adresse…<br>Tél…</div>
      </div>
      <div class="col-sm-6 text-sm-end mt-3 mt-sm-0">
        <h6 class="text-uppercase text-muted">Reçu</h6>
        <h5 class="mb-1">{{ payment.receiptNumber }}</h5>
        <div class="text-muted">Payé le {{ payment.paidAt|date('d/m/Y H:i') }}</div>
      </div>
    </div>

    <div class="row mb-4">
      <div class="col-sm-6">
        <h6 class="text-uppercase text-muted">Client</h6>
        <div class="fw-medium">{{ payment.rdv.client.nometprenom }}</div>
        <div class="text-muted">{{ payment.rdv.client.telephone }}</div>
        <div class="text-muted">{{ payment.rdv.client.email }}</div>
      </div>
      <div class="col-sm-6 text-sm-end mt-3 mt-sm-0">
        <h6 class="text-uppercase text-muted">Rendez-vous</h6>
        <div>Prestation : <strong>{{ payment.rdv.prestation.libelle }}</strong></div>
        <div>Début : {{ payment.rdv.startAt|date('d/m/Y H:i') }}</div>
        <div>Fin : {{ payment.rdv.endAt|date('d/m/Y H:i') }}</div>
        <div>Méthode : {{ payment.methode }}</div>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-bordered mb-0">
        <thead class="table-light">
          <tr>
            <th>Description</th>
            <th class="text-end">Montant (MRU)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ payment.rdv.prestation.libelle }}</td>
            <td class="text-end">{{ payment.amount|number_format(0, ',', ' ') }}</td>
          </tr>
          <tr>
            <td class="text-end fw-medium">Total payé</td>
            <td class="text-end fw-semibold">{{ payment.amount|number_format(0, ',', ' ') }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    {% if payment.notes %}
      <div class="mt-3">
        <h6 class="text-uppercase text-muted">Notes</h6>
        <div>{{ payment.notes }}</div>
      </div>
    {% endif %}

    <div class="mt-4 text-center small text-muted">
      Merci pour votre confiance.
    </div>
  </div>
</div>

<style>
@media print {
  header#page-topbar, .app-menu, .footer, .layout-rightside, .btn, .d-print-none { display: none !important; }
  .main-content, .page-content, .container-fluid { margin: 0 !important; padding: 0 !important; }
  .card { box-shadow: none !important; border: 0 !important; }
}
</style>
{% endblock %}
